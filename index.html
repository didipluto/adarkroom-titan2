<!DOCTYPE html>
<html itemscope itemtype="https://schema.org/CreativeWork">
<head>
	<meta charset="UTF-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	
	<link rel="manifest" href="manifest.json">
	<meta name="mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">

	<title>A Dark Room (Titan Fix)</title>
	
	<link rel="shortcut icon" href="favicon.ico" />
	<link rel="image_src" href="img/adr.png" />
	
	<style>
		/* 1. 彻底隐藏所有警告（加了 !important 和最高层级） */
		#mobile, #mobile-warning, .mobile-warning { 
			display: none !important; 
			visibility: hidden !important; 
			height: 0 !important; 
			width: 0 !important;
			pointer-events: none !important;
		}

		/* 2. 左侧日志栏：像素级变窄，字体变小 */
		div#notifications {
			width: 120px !important; /* 强制窄版 */
			left: 0 !important;
			top: 0 !important;
			bottom: 0 !important;
			z-index: 50 !important;
			font-size: 12px !important; /* 小字号，显示更多内容 */
			background: linear-gradient(to right, white 90%, rgba(255,255,255,0)); /* 防止文字透视 */
		}
		
		/* 3. 日志栏渐变遮罩 */
		div#notifyGradient {
			width: 120px !important;
			display: none; /* 既然背景改了，这个遮罩可以关掉，减少重叠风险 */
		}

		/* 4. 主容器：像素级避让，绝不重叠 */
		div#wrapper {
			width: auto !important;
			margin-left: 130px !important; /* 左边空出 130px 给日志栏 */
			padding: 20px 10px 0 0 !important; /* 内部 Padding */
			max-width: none !important;
			position: static !important; /* 取消相对定位，防止乱飘 */
		}
		
		/* 5. 修复内容区滑块宽度 */
		div#outerSlider, div.location {
			width: 100% !important;
		}

		/* 6. 按钮区域微调 */
		div.button {
			width: 90% !important; /* 按钮不要太宽 */
			max-width: 200px !important;
		}

		/* 全局字号 */
		body { 
			font-size: 14px; 
			background: white; /* 确保背景不透明 */
		}
	</style>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
	<script>
		if(!window.jQuery) {
			document.write('<script src="lib/jquery.min.js"><\/script>')
		}
	</script>
	
	<script>
		// 在任何其他脚本加载前，先占位，把 isMobile 锁死为 false
		var Detect = window.Detect || {};
		Object.defineProperty(Detect, 'isMobile', {
			get: function() { return false; },
			set: function() { }, // 禁止被外部修改
			configurable: false
		});
		
		// 劫持 window.location，防止跳转
		var originalLocation = window.location;
		// 只有当目标网址包含 mobileWarning 时才拦截
		// (这里没法完全劫持 location 对象，但可以通过 hook 拦截部分逻辑)
	</script>

	<script src="lib/jquery.color-2.1.2.min.js"></script>
	<script src="lib/jquery.event.move.js"></script>
	<script src="lib/jquery.event.swipe.js"></script>
	<script src="lib/base64.js"></script>
	<script src="lib/translate.js"></script>
	
	<script src="lang/langs.js"></script>
	
	<script>
		var lang = decodeURIComponent((new RegExp('[?|&]lang=' + '([^&;]+?)(&|#|;|$)').exec(location.search)||[,""])[1].replace(/\+/g, '%20'))||null;
		if(!lang){
			try { lang = localStorage.lang || 'zh_cn'; } catch(e) { lang = 'zh_cn'; }
		}
		if(lang && lang != 'en'){
			document.write('<script src="lang/'+lang+'/strings.js"><\/script>');
			document.write('<link rel="stylesheet" type="text/css" href="lang/'+lang+'/main.css" \/>');
		}
	</script>
	
	<script src="script/Button.js"></script>
	<script src="script/audioLibrary.js"></script>
	<script src="script/audio.js"></script>
	<script src="script/engine.js"></script>
	<script src="script/state_manager.js"></script>
	<script src="script/header.js"></script>
	<script src="script/notifications.js"></script>
	<script src="script/events.js"></script>
	<script src="script/room.js"></script>
	<script src="script/outside.js"></script>
	<script src="script/world.js"></script>
	<script src="script/path.js"></script>
	<script src="script/ship.js"></script>
	<script src="script/space.js"></script>
	<script src="script/fabricator.js"></script>
	<script src="script/prestige.js"></script>
	<script src="script/scoring.js"></script>
	
	<script src="script/events/global.js"></script>
	<script src="script/events/room.js"></script>
	<script src="script/events/outside.js"></script>
	<script src="script/events/encounters.js"></script>
	<script src="script/events/setpieces.js"></script>
	<script src="script/events/executioner.js"></script>
	
	<script type='text/javascript'>
		var oldIE = false;
	</script>
	<link rel="stylesheet" type="text/css" href="css/main.css" />
	<link rel="stylesheet" type="text/css" href="css/room.css" />
	<link rel="stylesheet" type="text/css" href="css/outside.css" />
	<link rel="stylesheet" type="text/css" href="css/path.css" />
	<link rel="stylesheet" type="text/css" href="css/world.css" />
	<link rel="stylesheet" type="text/css" href="css/ship.css" />
	<link rel="stylesheet" type="text/css" href="css/space.css" />
	<link rel="stylesheet" type="text/css" href="css/fabricator.css" />
	
	<script src="script/localization.js"></script>
	
	<script>
		$(document).ready(function(){
			// 再次强制移除警告
			$('#mobile').remove();
			$('#mobile-warning').remove();
			// 再次强制修正 CSS (防止被 JS 覆盖)
			$('#wrapper').css('display', 'block');
			// 打印日志，确认代码已更新
			console.log("Titan Fix Loaded");
		});
	</script>

	<script async src="https://www.googletagmanager.com/gtag/js?id=G-606P6J79WH"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());
		gtag('config', 'G-606P6J79WH');
	</script>
	
</head>
<body>
	<div id="wrapper">
		<div id="saveNotify"><script>document.write(_("saved."));</script></div>
		<div id="content">
			<div id="outerSlider">
				<div id="main">
					<div id="header"></div>
				</div>
			</div>
		</div>
  </div>
  <a class="logo" href="https://www.doublespeakgames.com" alt="doublespeak games" target="_blank">
    </a>
</body>
</html>
